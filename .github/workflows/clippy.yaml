name: clippy

on:
    push:
        branches:
            - main  # Run on push to main branch
            - 'release/*'  # Run on push to any release branch
    pull_request:
        types: [opened, synchronize, reopened]  # Run on pull request events

# Make sure CI fails on all warnings, including Clippy lints
env:
    RUSTFLAGS: "-Dwarnings"

jobs:
    clippy:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4
            - name: Run Clippy
              run: cargo clippy --all-targets --all-features -- -D dead_code -D warnings